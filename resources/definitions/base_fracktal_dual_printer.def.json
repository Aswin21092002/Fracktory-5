{
    "version": 2,
    "name": "Fracktal Works Dual Printer Base Description",
    "inherits": "base_fracktal_printer",
    "metadata":
    {
        "visible": false,
        "author": "Fracktal Works",
        "manufacturer": "Fracktal Works",
        "has_machine_materials": true,
        "has_machine_quality": true,
        "has_materials": true,
        "has_variant_materials": true,
        "has_variants": true,
        "preferred_quality_type": "normal",
        "preferred_variant_name": "Model 0.4 mm",
        "variants_name": "Nozzle"
    },
    "overrides":
    {
        "machine_extruder_count": { "default_value": 2 },
        "machine_end_gcode": { "default_value": ";End GCode\nM104 T0 S0 ;extruder heater off\nM104 T1 S0 ;extruder heater off\nM140 S0 ;heated bed heater off (if you have it)\nG91 ;relative positioning\nG1 E-1 F300 ;retract the filament a bit before lifting the nozzle, to release some of the pressure\nG1 Z+0.5 E-5 X-20 Y-20 F3000 ;move Z up a bit and retract filament even more\nG28;move X/Y to min endstops, so the head is out of the way\nM84 ;steppers off\nM107\nG90 ;absolute positioning" },
        "machine_start_gcode": { "value": "';Machine Model: {machine_name} \\n;Materials used: {used_material}\\n;Materials brand: {used_material_brand} \\n;Extruders used: {used_nozzle_size}\\n;Sliced at: {day} {date} {time}\nG21 ;metric values\nM107\nG28\nM420 S1\nG90 ;absolute positioning\nG1 X0 Y0 Z5 F5000 ;move nozzle up 5mm for safe homing\nG29;ABL\nM500\nM82 ;set extruder to absolute mode\nM107 ;start with the fan off\nG1 X0 Y0 Z15.0 F5000 ;move the platform down 15mm\n\n; Extrude purge line\n\nG92 E0 ; reset extruder position\nG0 E7 X15 Z0.2 F500 ; purge\nG0 X25 E4 F500 ; purge\nG0 X35 E4 F650 ; purge\nG0 X45 E4 F800 ; purge\nG0 X{45 + 3} Z{0.05} F{8000} ; wipe, move close to the bed\nG0 X{45 + 3 * 2} Z0.2 F{8000} ; wipe, move quickly away from the bed\n\nG1 F200 E3 ; extrude 3mm of feed stock\nG92 E0 ; zero the extruded length again\nM117 Printing...\n" },
        "prime_tower_brim_enable": { "value": "True" },
        "prime_tower_enable": { "value": "True" },
        "prime_tower_flow": { "value": 120 },
        "prime_tower_position_x": { "value": "40" },
        "prime_tower_position_y": { "value": "20" },
        "prime_tower_wipe_enabled": { "value": "False" },
        "prime_tower_min_volume" : {"value" : "0.9*layer_height*3.14*(((prime_tower_size/2)**2)-(((prime_tower_size/2)-2.4)**2)) if int(extruder_nr) == 0 else 0.75*layer_height*3.14*((((prime_tower_size/2)-2.4)**2)-(((prime_tower_size/2)-4.8)**2))"}

    },
    "blackmagic":
    {
        "children":
        {
            "material_type":
            {
                "comments": "Fracktal Works Setting",
                "default_value": "",
                "description": "Material type",
                "enabled": false,
                "label": "Material type",
                "settable_per_extruder": true,
                "type": "str"
            },
            "used_material":
            {
                "comments": "Fracktal Works setting",
                "default_value": "",
                "description": "Comment with the materials used.",
                "enabled": false,
                "label": "Used materials",
                "settable_per_extruder": true,
                "type": "str",
                "value": "'T0 ' + str(materialInfoInExtruder(0, 'material')) + ' T1 ' + str(materialInfoInExtruder(1, 'material'))"
            },
            "used_material_brand":
            {
                "comments": "Fracktal Works setting",
                "default_value": "",
                "description": "Comment with the brand used.",
                "enabled": false,
                "label": "Used materials",
                "settable_per_extruder": true,
                "type": "str",
                "value": "'T0 ' + str(materialInfoInExtruder(0, 'brand')) + ' T1 ' + str(materialInfoInExtruder(1, 'brand'))"
            },
            "used_nozzle_size":
            {
                "comments": "Fracktal Works setting",
                "default_value": "",
                "description": "Comment with the nozzle size used.",
                "enabled": false,
                "label": "Used nozzle size",
                "settable_per_extruder": true,
                "type": "str",
                "value": "'T0 ' + str(extruderValue(0, 'machine_nozzle_size'))  + ' T1 ' + str(extruderValue(1, 'machine_nozzle_size')) + str(extruderValue(1, 'machine_nozzle_type'))"
            }
        }
    }
}